# pic_Interrupt
inanzu


つうても実質数μSec〜余程ヘボい書き方したか重い処理させたかで数mSecの遅延やタイミングブレ(これをジッタ、という)が生じる程度なので、通常は問題にならない
会話を表示 0件のリツイート 1件のお気に入り
返信  リツイート  お気に入り1
その他
 いなんず ‏@inanzu  7分7分前
@hinagesi_708 この書き方のリスクを伝えとくと、割り込みからwhile()の中のifに辿り着くまで反応が起きないので、遅かったり、時間が一定しなかったりする弱点がある。精密なタイミングがほしい時は割り込みハンドラの中で一定時間内に終わるように書くこと！
会話を表示 0件のリツイート 1件のお気に入り
返信  リツイート  お気に入り1
その他
 いなんず ‏@inanzu  11分11分前
@hinagesi_708 セミコロンとかは適当に補ってねー。うちではコンパイルしてないのでww
会話を表示 0件のリツイート 1件のお気に入り
返信  リツイート  お気に入り1
その他
 いなんず ‏@inanzu  20分20分前
@hinagesi_708 一つの割り込みハンドラ関数が実行されている間は、よその割り込みハンドラは「保留」されているので、処理の滞留を防ぐためにも極力割り込みハンドラ関数には何も書かないのがコツ。
会話を表示 0件のリツイート 1件のお気に入り
返信  リツイート  お気に入り1
その他
 いなんず ‏@inanzu  21分21分前
@hinagesi_708 割り込みハンドラの中でT0IFとかを判定しているのは、割り込みハンドラ関数からmain()-while()のif文にたどり着くまでどれほど時間が必要か、設計時点では想定しづらく、最悪割り込んだ時の状況から書き換わるかも知れない、という想定があるから。
会話を表示 0件のリツイート 1件のお気に入り
返信  リツイート  お気に入り1
その他
 いなんず ‏@inanzu  24分24分前
@hinagesi_708 あ、ごめん、while中のif文の判定の論理式は&&じゃなくて&一個だけ。まちがってらw
会話を表示 0件のリツイート 1件のお気に入り
返信  リツイート  お気に入り1
その他
 いなんず ‏@inanzu  26分26分前
@hinagesi_708 あーそれがやりたかったと、実際それでオッケーですが、実はもうちょっと簡単な方法もあります。 #define T0INT_OCCURED 1 #define T1INT_OCCURED 2 (cont) http://tl.gd/n_1sn4svf 
0件のリツイート 1件のお気に入り
返信  リツイート  お気に入り1
その他
 いなんず ‏@inanzu  49分49分前
@hinagesi_708 ようするに、割り込みが起きたことだけをInterrupt handlerでセットして、main()の中のwhile()の中のif文で何が起きたかを把握させれば、いくらでも処理は付け足せるというわけ。これを「メッセージング」という。
会話を表示 0件のリツイート 1件のお気に入り
返信  リツイート  お気に入り1
その他
 いなんず ‏@inanzu  50分50分前
いなんずさんがリツイートしました いなんず
@hinagesi_708 いなんずさんが追加
いなんず @inanzu
@hinageshi_708 こういうこと

Read: http://tl.gd/n_1sn4srb 
会話を表示 0件のリツイート 0件のお気に入り
返信  リツイート  お気に入りに登録
その他
 いなんず ‏@inanzu  54分54分前
@hinageshi_708 こういうこと

Read: http://tl.gd/n_1sn4srb 
0件のリツイート 1件のお気に入り
返信  リツイート  お気に入り1
その他
 いなんず ‏@inanzu  59分59分前
@hinagesi_708 ただ、今回の場合はそれほど複雑じゃあない
会話を表示 0件のリツイート 1件のお気に入り
返信  リツイート  お気に入り1
その他
 いなんず ‏@inanzu  1時間1時間前
@hinagesi_708 もちろんそうなります。なので、通常はキューというアルゴリズムメソッドを使う。
会話を表示 0件のリツイート 0件のお気に入り
返信  リツイート  お気に入りに登録
その他
 いなんず ‏@inanzu  1時間1時間前
@hinagesi_708 Arduinoであれば、loop()関数の中で、フラグをずーっと見ていて、割り込みルーチンでフラグが書かれたー＞順繰りに処理を呼び出すー＞処理がなくなったらプロセサを止める、という書き方になる
会話を表示 0件のリツイート 1件のお気に入り
返信  リツイート  お気に入り1
その他
 いなんず ‏@inanzu  1時間1時間前
@hinagesi_708
割り込みルーチン内
割り込みが起きたー＞起きたことを記録する(イベントを発生させる)

処理側が起きた記録の有無を読み出し、処理する関数を呼び出す(イベント・ドリブン)という書き方を一般にします。
会話を表示 0件のリツイート 0件のお気に入り
返信  リツイート  お気に入りに登録
その他
 いなんず ‏@inanzu  1時間1時間前
@hinagesi_708 というか、原理的に複数の関数を呼ぶ仕組みがもしあるとして、どう実装するのかと考えると「割り込みがひとつしか環数を呼び出せない」理由も自明な気が。
会話を表示 0件の
